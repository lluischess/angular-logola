<section id="popular-products" class="products-carousel">
  <div class="container-lg overflow-hidden py-5">
    <div class="row">
      <div class="col-md-12">
        <div class="section-header d-flex justify-content-between my-4">
          <h2 class="section-title">Nuestros Chocolates</h2>
          <div class="d-flex align-items-center">
            <a [routerLink]="['/productos']" [queryParams]="{categoria: 'chocolates'}" class="btn btn-primary me-2">Ver todo</a>
            <div class="swiper-buttons">
              <button class="swiper-prev chocolates-carousel-prev btn btn-primary">❮</button>
              <button class="swiper-next chocolates-carousel-next btn btn-primary">❯</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <swiper-container
          #swiper
          slides-per-view="1"
          space-between="30"
          init="false">
          <swiper-slide *ngFor="let producto of productos" class="product-item swiper-slide" role="group">
            <figure>
              <a [routerLink]="['/producto', producto.id]" [title]="producto.nombre">
                <img [src]="producto.imagen" [alt]="producto.nombre" class="tab-image img-fluid" style="max-height: 225px;">
              </a>
            </figure>
            <div class="text-center d-flex flex-column justify-content-between">
              <h3 class="fs-6 fw-normal">{{ producto.nombre | titlecase }}</h3>
              <span class="text-muted">{{producto.referencia | uppercase}}</span>
              <div class="d-flex justify-content-center align-items-center gap-2">
                <span class="text-dark fw-semibold">{{ producto.medidas }}</span>
              </div>
              <div class="button-area p-3 pt-0">
                <div class="row g-1 mt-2">
                  <div class="col-12">
                    <!-- Botón de añadir al presupuesto -->
                  <a (click)="addToCart(producto)" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCart" aria-controls="offcanvasCart" class="btn btn-primary rounded-1 p-2 fs-7 btn-cart w-100">
                    <svg width="18" height="18"><use xlink:href="#cart"></use></svg> Añadir al presupuesto
                  </a>
                  </div>
                </div>
              </div>
            </div>
          </swiper-slide>
        </swiper-container>
      </div>
    </div>
  </div>
</section>
